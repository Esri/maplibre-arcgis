<!DOCTYPE html>
<html>

<head>
  <style>
    html,
    body,
    #map {
      padding: 0;
      margin: 0;
      width: 100%;
      height: 100%;
    }
  </style>
  <link href="../../../node_modules/maplibre-gl/dist/maplibre-gl.css" rel="stylesheet" />
  <script src="../../../node_modules/maplibre-gl/dist/maplibre-gl.js"></script>
  <script src="../../../dist/umd/maplibre-arcgis.min.js"></script>
</head>

<body>
  <div id="map"></div>
  <script type="module">

    const map = new maplibregl.Map({
      container: "map",
      zoom: 5,
      center: [-118.4882,34.0243]
    });

    const basemapStyle = maplibreArcGIS.BasemapStyle.applyStyle(map, {
      style: 'arcgis/navigation',
      token: window.__ARCGIS_API_KEY__ // this will be injected by puppeteer
    });

    // expose map and basemapStyle to window so we can access them in puppeteer
    window.map = map;
    window.basemapStyle = basemapStyle;

    const layerUrlTrails = 'https://services3.arcgis.com/GVgbJbqm8hXASVYi/arcgis/rest/services/Trails/FeatureServer/0';
    const featureLayer = await maplibreArcGIS.FeatureLayer.fromUrl(layerUrlTrails);

    featureLayer.addSourcesAndLayersTo(map);
  </script>
</body>

</html>
