<!DOCTYPE html>
<html>
    <head>
        <style>
            html, body, #map {
                padding:0;
                margin:0;
                width:100%;
                height:100%;
            }
        </style>
        <link href="../node_modules/maplibre-gl/dist/maplibre-gl.css" rel="stylesheet"/>
        <script src="../node_modules/maplibre-gl/dist/maplibre-gl.js"></script>
        <!-- Maplibre ArcGIS -->
        <script src="../dist/maplibre-arcgis-debug.js"></script>

    </head>
    <body>
        <div id="map"></div>
        <script src="../debug/apikey.js"></script>
        <script>

            const basemapsKey = apiKey;

            const basemapStyle = new maplibreArcGIS.BasemapStyle('arcgis/light-gray', {
                accessToken: basemapsKey
            });
            const map = new maplibregl.Map({
                container: "map", // the id of the div element
                style: basemapStyle.styleUrl,
                zoom: 12, // starting zoom
                center: [-118.805, 34.027], // starting location [longitude, latitude]
                attributionControl:false
            });
            map.addControl(new maplibreArcGIS.AttributionControl());

            map.on('load',async ()=>{
                // Service URLs are also supported. Try:
                // https://vectortileservices3.arcgis.com/GVgbJbqm8hXASVYi/arcgis/rest/services/Santa_Monica_Mountains_Parcels_VTL/VectorTileServer/
                const vectorService = await maplibreArcGIS.VectorTileService.create('f0298e881b5b4743bbdf2c7d378acc84');
                vectorService.addTo(map);
            })


            // Alternatively, add sources and layers the 'maplibre way':
            /*
            map.addSource(vectorService.id,vectorService.source);
            vectorService.layers.forEach(layer => {
                map.addLayer(layer);
            })
            */
        </script>
    </body>
</html>