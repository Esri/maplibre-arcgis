<!DOCTYPE html>
<html>

<head>
  <style>
    html,
    body,
    #map {
      padding: 0;
      margin: 0;
      width: 100%;
      height: 100%;
    }
  </style>
  <link href="../node_modules/maplibre-gl/dist/maplibre-gl.css" rel="stylesheet" />
  <script src="../node_modules/maplibre-gl/dist/maplibre-gl.js"></script>
  <!-- Maplibre ArcGIS -->
  <script src="../dist/maplibre-arcgis-debug.js"></script>

</head>

<body>
  <div id="map"></div>
  <script src="../debug/apikey.js"></script>
  <script type="module">

    const basemapsKey = apiKey;

    const map = new maplibregl.Map({
      container: "map", // the id of the div element
      zoom: 13, // starting zoom
      center: [-118.498, 34.014], // starting location [longitude, latitude]
    });
    const style = new maplibreArcGIS.BasemapStyle('arcgis/light-gray', {
      token: basemapsKey
    });
    style.applyStyleTo(map);

    map.on('load', async () => {
      const vectorLayer = await maplibreArcGIS.VectorTileLayer.fromPortalItem('f0298e881b5b4743bbdf2c7d378acc84');
      vectorLayer.addSourcesAndLayersTo(map);
    });
    // Service URLs are also supported with VectorTileLayer.fromUrl
    // https://vectortileservices3.arcgis.com/GVgbJbqm8hXASVYi/arcgis/rest/services/Santa_Monica_Mountains_Parcels_VTL/VectorTileServer/
  </script>
</body>

</html>